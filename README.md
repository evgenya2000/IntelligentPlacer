# IntelligentPlacer
## Решение задачи с семантическим разрывом

### Постановка задачи

  На вход поступает фотография, на которой имеется некоторое множество предметов, ранее выбранных и зафиксированных. Также на фотографии расположен белый лист бумаги А4, на котором черным маркером нарисован многоугольник произвольного размера.

  Алгоритм должен определить, поместятся ли предметы в этот многоугольник с помощью параллельного переноса. Объекты могут поместиться в многоугольнике, если при его наложении на совокупность предметов, никакая из сторон объектов не будет выходить за границы фигуры (сторона обекта может лежать на границе).
  
### Требования к входным и выходным данным

#### Вход: 
  ##### Требование к изображениям:
1. Изображения должно быть в .jpg формате
2. Фотографии должны быть сделаны сверху, перпендикулярно плоскости объекта
3. Все фотографии сделаны при одинаковом освещении, изображения не менее 1 Мп
4. Объекты на фотографии имеют чёткую границу, отсутствуют засвеченные области и тени высокой интенсивности
5. Изображения цветные, без цветовой коррекции и наложения фильтров
  ##### Требование к предметам:
1. Предметы не сливаются с поверхностью
2. Предметы не перекрывают друг друга
3. Предметы не имеют общих границ (расстояние между предметами не менее 0.5 см)
4. Предмет может присутствовать на изображении только в единственном экземпляре
5. Предметы можно вращать, но плоскость предмета с наибольшей площадью должна находиться параллельно плоскости стола
  ##### Требование к поверхности:
1. Поверхность должна быть однотонной
2. Поверхность должна быть одна для всех фотографий
  ##### Требования к исходным данным
1. Исходные данные содержат изображения десяти различных предметов
2. Фотографии исходных предметов сделаны на чистом белом листе A4, при этом предметы находятся в центре листа
3. Края листов бумаги на фото хорошо видны
  ##### Требования к входным данным
1. Левую половину изображения занимает белый лист бумаги A4 в горизонтальной ориентации, на котором нарисован многоугольник черным цветом
2. Правую половину изображения занимают предметы
3. Изображение не обязательно должно быть горизонтальным, но лист с многоугольником должен находиться слева, а предметы  справа
4. Число вершин нарисованного многоугольника не больше 10
5. Края листа бумаги на фото хорошо видны
#### Выход:
В качестве ответа на задачу, в консоль будет выведен идин из ответов:
  1) YES, если объекты помещаются в многоугольник
  2) NO, в противном случае.
  
Также в случае успеха будет выведен результат размещения предмета в бинарном варианте
### Данные
  Изображения 10 предметов хранятся в папке [iteam](https://github.com/evgenya2000/IntelligentPlacer/tree/develop/data/iteams)
  Все тесты хранятся в папке [case](https://github.com/evgenya2000/IntelligentPlacer/tree/develop/data/case)
  Описание предметов и тестов доступно по [ссылке](https://github.com/evgenya2000/IntelligentPlacer/blob/develop/data/dataset.md)

### План алгоритма
#### Обработка изображений 10 предметов
1. Загрузить изображения
2. Сжать изображения и сделать их черно-белыми для ускорения последующих операций для ускорения последующих операций
3. Бинаризировать изображения с применением threshold_otsu и морфологических операций
4. Получить маски предметов и обрезаем изображения по маскам

#### Поиск многоугольника и предметов на входном изображении
1. Загрузить изображения
2. Сжать изображения и сделать их черно-белыми для ускорения последующих операций
3. Использовать размытие по Гауссу для сглаживания изображения
4. Найти границы объектов с использованием детектора Кэнни
5. Найти маску объектов с помощью морфологических операций
6. Разрезать изображение на две части относительно середины горизонтали
7. На изображении полученном из левой части находим многоугольник, и производим заливку маски фигуры по контуру
8. Из правой части маску объектов разбить на компоненты связности, обрезать каждую до ограничивающих многоугольников и инвертировать

#### Сопоставление многоугольника и предметов

1. Найти сумму площадей найденных предметов и сравнить с площадью многоугольника, если сумма площадей предметов превосходит площадь многоугольника, то прервать работу алгоритма и вернуть NO
2. Параллельным переносом сдвигаем по одному предмету внутрь маски многоугольника.  Проверяем удачно ли размещен предмет внутри маски прямоугольника с использованием побитовой операции AND, если да, то предмет закрепляется а этом месте, если нет, то возвращаем NO
3. При удачном размещении всех предметов алгоритм возвращает YES, а изображение найденного алгоритмом варианта размещения сохраняется по заданному пути
